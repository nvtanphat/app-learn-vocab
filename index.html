<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="·ª®ng d·ª•ng h·ªçc t·ª´ v·ª±ng ti·∫øng Anh v·ªõi flashcard, quiz, mini games v√† theo d√µi ti·∫øn ƒë·ªô">
    <meta name="theme-color" content="#6366f1">
    <title>H·ªçc T·ª´ V·ª±ng Ti·∫øng Anh</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="progress-styles.css">
    <link rel="stylesheet" href="games.css">
    <link rel="stylesheet" href="list-selector.css">
    <link rel="stylesheet" href="responsive.css">
    <!-- SheetJS -->

    <script src="https://cdn.sheetjs.com/xlsx-0.20.0/package/dist/xlsx.full.min.js"></script>
</head>
<body>
    <div class="app-container">
        <header>
            <div class="header-top">
                <h1><i class="fa-solid fa-graduation-cap"></i> English Master</h1>
                <div class="header-actions">
                    <button class="icon-btn" onclick="showListSelector()" title="Ch·ªçn nh√≥m t·ª´">
                        <i class="fa-solid fa-list"></i>
                    </button>
                    <button id="theme-toggle" class="icon-btn"><i class="fa-solid fa-moon"></i></button>
                </div>
            </div>
            <nav>
                <button class="nav-btn active" data-tab="flashcard"><i class="fa-solid fa-layer-group"></i> Flashcard</button>
                <button class="nav-btn" data-tab="quiz"><i class="fa-solid fa-circle-question"></i> Quiz</button>
                <button class="nav-btn" data-tab="typing"><i class="fa-solid fa-keyboard"></i> G√µ t·ª´</button>
                <button class="nav-btn" data-tab="games"><i class="fa-solid fa-gamepad"></i> Mini Games</button>
                <button class="nav-btn" data-tab="progress"><i class="fa-solid fa-chart-line"></i> Ti·∫øn ƒë·ªô</button>
                <button class="nav-btn" data-tab="search"><i class="fa-solid fa-magnifying-glass"></i> T√¨m ki·∫øm</button>
            </nav>
        </header>

        <!-- List Selector (Shows first time) -->
        <div id="list-selector-overlay" class="overlay hidden">
            <div class="selector-container">
                <button class="close-overlay-btn" onclick="hideListSelector()" title="ƒê√≥ng">
                    <i class="fa-solid fa-xmark"></i>
                </button>
                
                <h2>üìö Ch·ªçn nh√≥m t·ª´ ƒë·ªÉ h·ªçc</h2>
                <p class="selector-subtitle">M·ªói nh√≥m c√≥ 30 t·ª´. H√£y ch·ªçn nh√≥m b·∫°n mu·ªën h·ªçc!</p>
                
                <div class="list-grid" id="list-grid">
                    <!-- Lists will be generated here -->
                </div>
                
                <div class="current-list-info">
                    <p>Nh√≥m hi·ªán t·∫°i: <strong id="current-list-name">Ch∆∞a ch·ªçn</strong></p>
                    <button class="change-list-btn" onclick="hideListSelector()">
                        <i class="fa-solid fa-check"></i> Xong
                    </button>
                </div>
            </div>
        </div>

        <main>
            <!-- Flashcard Section -->
            <section id="flashcard" class="tab-content active">
                <div class="flashcard-container">
                    <div class="card-wrapper">
                        <div class="card" id="flashcard-element">
                            <div class="card-front">
                                <div class="card-header">
                                    <span class="hint-text">Click ƒë·ªÉ l·∫≠t</span>
                                    <button class="fav-btn" id="fc-fav-btn"><i class="fa-regular fa-star"></i></button>
                                </div>
                                <h2 id="fc-word">Loading...</h2>
                                <p id="fc-pronunciation">/loading/</p>
                                <button class="audio-btn" id="fc-audio-btn"><i class="fa-solid fa-volume-high"></i></button>
                            </div>
                            <div class="card-back">
                                <h3 id="fc-meaning">ƒêang t·∫£i d·ªØ li·ªáu...</h3>
                                <p id="fc-example" class="example"></p>
                            </div>
                        </div>
                    </div>
                    <div class="controls">
                        <button id="prev-btn" class="control-btn"><i class="fa-solid fa-arrow-left"></i> Tr∆∞·ªõc</button>
                        <button id="flip-btn" class="control-btn flip-btn"><i class="fa-solid fa-repeat"></i> L·∫≠t th·∫ª</button>
                        <span id="progress-text">0 / 0</span>
                        <button id="next-btn" class="control-btn">Sau <i class="fa-solid fa-arrow-right"></i></button>
                    </div>
                    <div class="controls-extra">
                        <button id="shuffle-btn" class="control-btn-small"><i class="fa-solid fa-shuffle"></i> X√°o tr·ªôn</button>
                        <button id="autoplay-btn" class="control-btn-small"><i class="fa-solid fa-play"></i> T·ª± ƒë·ªông</button>
                        <span class="keyboard-hint">üí° D√πng ‚Üê ‚Üí ƒë·ªÉ chuy·ªÉn th·∫ª</span>
                    </div>
                    <div class="actions">
                        <button id="mark-learned-btn" class="action-btn"><i class="fa-regular fa-check-circle"></i> ƒê√°nh d·∫•u ƒë√£ thu·ªôc</button>
                    </div>
                </div>
            </section>

            <!-- Quiz Section -->
            <section id="quiz" class="tab-content">
                <div class="quiz-container">
                    <div class="quiz-header">
                        <span class="score-display">ƒêi·ªÉm: <span id="score">0</span></span>
                        <span class="due-display">C·∫ßn √¥n: <span id="due-count">0</span> <i class="fa-solid fa-clock"></i></span>
                        <span class="streak-display">Chu·ªói: <span id="streak">0</span> <i class="fa-solid fa-fire"></i></span>
                    </div>
                    
                    <div class="quiz-mode-selector">
                        <button class="mode-btn active" data-mode="normal">üìù Th∆∞·ªùng</button>
                        <button class="mode-btn" data-mode="hard">üî• Kh√≥</button>
                        <button class="mode-btn" data-mode="review">üìö √în sai</button>
                    </div>

                    <div class="question-card">

                        <h3 id="quiz-question">T·ª´ n√†y nghƒ©a l√† g√¨?</h3>
                        <h2 id="quiz-word" class="highlight-word">...</h2>
                        <div class="options-grid" id="quiz-options">
                            <!-- Options will be generated here -->
                        </div>
                    </div>
                    <div id="quiz-feedback" class="feedback hidden"></div>
                    <button id="next-question-btn" class="primary-btn hidden">C√¢u ti·∫øp theo</button>
                </div>
            </section>

            <!-- Typing Section -->
            <section id="typing" class="tab-content">
                <div class="typing-container">
                    <div class="quiz-header">
                        <span class="score-display">ƒêi·ªÉm: <span id="typing-score">0</span></span>
                    </div>
                    <div class="question-card">
                        <h3>H√£y g√µ l·∫°i t·ª´ ti·∫øng Anh c√≥ nghƒ©a l√†:</h3>
                        <h2 id="typing-meaning" class="highlight-word">...</h2>
                        <div class="typing-input-area">
                            <input type="text" id="typing-input" placeholder="Nh·∫≠p t·ª´ v·ª±ng..." autocomplete="off">
                            <button id="typing-submit-btn" class="primary-btn">Ki·ªÉm tra</button>
                        </div>
                        <button id="typing-hint-btn" class="text-btn">G·ª£i √Ω (Xem ch·ªØ c√°i ƒë·∫ßu)</button>
                    </div>
                    <div id="typing-feedback" class="feedback hidden"></div>
                    <button id="typing-next-btn" class="primary-btn hidden">T·ª´ ti·∫øp theo</button>
                </div>
            </section>

            <!-- Mini Games Section (NEW) -->
            <section id="games" class="tab-content">
                <div class="games-menu">
                    <h2>üéÆ Ch·ªçn Mini Game</h2>
                    <div class="game-cards">
                        <div class="game-card" onclick="startGame('puzzle')">
                            <div class="game-icon">üß©</div>
                            <h3>Word Puzzle</h3>
                            <p>S·∫Øp x·∫øp ch·ªØ c√°i th√†nh t·ª´ ƒë√∫ng</p>
                        </div>
                        <div class="game-card" onclick="startGame('typefast')">
                            <div class="game-icon">‚ö°</div>
                            <h3>Type Fast</h3>
                            <p>Nghe v√† g√µ t·ª´ nhanh nh·∫•t</p>
                        </div>
                        <div class="game-card" onclick="startGame('memory')">
                            <div class="game-icon">üÉè</div>
                            <h3>Memory Match</h3>
                            <p>Gh√©p t·ª´ v·ªõi nghƒ©a</p>
                        </div>
                    </div>
                </div>

                <!-- Word Puzzle Game -->
                <div id="puzzle-game" class="mini-game hidden">
                    <button class="back-btn" onclick="backToGamesMenu()"><i class="fa-solid fa-arrow-left"></i> Quay l·∫°i</button>
                    <div class="game-header">
                        <h2>üß© Word Puzzle</h2>
                        <div class="game-stats">
                            <span>ƒêi·ªÉm: <strong id="puzzle-score">0</strong></span>
                            <span>‚è±Ô∏è <strong id="puzzle-timer">30</strong>s</span>
                        </div>
                    </div>
                    <div class="question-card">
                        <h3 id="puzzle-meaning">Nghƒ©a: ...</h3>
                        <div class="shuffle-letters" id="shuffle-letters"></div>
                        <input type="text" id="puzzle-input" placeholder="Nh·∫≠p t·ª´..." autocomplete="off">
                        <button class="primary-btn" onclick="checkPuzzle()">Ki·ªÉm tra</button>
                    </div>
                    <div id="puzzle-feedback" class="feedback hidden"></div>
                </div>

                <!-- Type Fast Game -->
                <div id="typefast-game" class="mini-game hidden">
                    <button class="back-btn" onclick="backToGamesMenu()"><i class="fa-solid fa-arrow-left"></i> Quay l·∫°i</button>
                    <div class="game-header">
                        <h2>‚ö° Type Fast</h2>
                        <div class="game-stats">
                            <span>ƒêi·ªÉm: <strong id="typefast-score">0</strong></span>
                            <span>Combo: <strong id="typefast-combo">0</strong>üî•</span>
                            <span>‚è±Ô∏è <strong id="typefast-timer">60</strong>s</span>
                        </div>
                    </div>
                    <div class="question-card">
                        <button class="audio-btn-large" id="typefast-audio">
                            <i class="fa-solid fa-play"></i>
                        </button>
                        <p class="hint-text">Nghe v√† g√µ t·ª´ b·∫°n nghe ƒë∆∞·ª£c</p>
                        <input type="text" id="typefast-input" placeholder="G√µ t·ª´..." autocomplete="off">
                    </div>
                    <div id="typefast-feedback" class="feedback hidden"></div>
                </div>

                <!-- Memory Match Game -->
                <div id="memory-game" class="mini-game hidden">
                    <button class="back-btn" onclick="backToGamesMenu()"><i class="fa-solid fa-arrow-left"></i> Quay l·∫°i</button>
                    <div class="game-header">
                        <h2>üÉè Memory Match</h2>
                        <div class="game-stats">
                            <span>C·∫∑p: <strong id="memory-pairs">0</strong>/6</span>
                            <span>L∆∞·ª£t: <strong id="memory-moves">0</strong></span>
                        </div>
                    </div>
                    <div class="memory-grid" id="memory-grid">
                        <!-- Cards will be generated here -->
                    </div>
                </div>
            </section>

            <!-- Progress Section (NEW) -->
            <section id="progress" class="tab-content">
                <div class="progress-container">
                    <!-- Level & Badge -->
                    <div class="level-card">
                        <div class="level-info">
                            <span class="level-badge" id="level-badge">Level 1</span>
                            <h2 id="user-title">Ng∆∞·ªùi m·ªõi</h2>
                        </div>
                        <div class="xp-bar">
                            <div class="xp-fill" id="xp-fill"></div>
                        </div>
                        <p class="xp-text"><span id="current-xp">0</span> / <span id="next-level-xp">100</span> XP</p>
                    </div>

                    <!-- Streak & Stats -->
                    <div class="stats-grid">
                        <div class="stat-card streak-card">
                            <i class="fa-solid fa-fire stat-icon"></i>
                            <h3 id="streak-days">0</h3>
                            <p>Ng√†y li√™n ti·∫øp</p>
                        </div>
                        <div class="stat-card">
                            <i class="fa-solid fa-bookmark stat-icon"></i>
                            <h3 id="learned-count">0</h3>
                            <p>T·ª´ ƒë√£ thu·ªôc</p>
                        </div>
                        <div class="stat-card">
                            <i class="fa-solid fa-trophy stat-icon"></i>
                            <h3 id="total-score">0</h3>
                            <p>ƒêi·ªÉm s·ªë</p>
                        </div>
                    </div>

                    <!-- Badges -->
                    <div class="badges-section">
                        <h3>üèÜ Huy hi·ªáu</h3>
                        <div class="badges-grid" id="badges-grid">
                            <!-- Badges will be generated here -->
                        </div>
                    </div>

                    <!-- Difficult Words -->
                    <div class="difficult-words-section">
                        <h3>‚ö†Ô∏è T·ª´ hay sai (C·∫ßn √¥n l·∫°i)</h3>
                        <div class="difficult-words-list" id="difficult-words-list">
                            <!-- Will be generated by JS -->
                        </div>
                    </div>
                    
                    <!-- Data Management -->
                    <div class="data-management">
                        <h3>üíæ Qu·∫£n l√Ω d·ªØ li·ªáu</h3>
                        <div class="data-btns">
                            <button class="data-btn" onclick="exportProgress()">
                                <i class="fa-solid fa-download"></i> Xu·∫•t d·ªØ li·ªáu
                            </button>
                            <button class="data-btn" onclick="document.getElementById('import-file').click()">
                                <i class="fa-solid fa-upload"></i> Nh·∫≠p d·ªØ li·ªáu
                            </button>
                            <button class="data-btn danger" onclick="resetProgress()">
                                <i class="fa-solid fa-trash"></i> X√≥a h·∫øt
                            </button>
                        </div>
                        <input type="file" id="import-file" accept=".json" style="display: none" onchange="importProgress(event)">
                    </div>
                </div>
            </section>

            <!-- Search Section -->

            <section id="search" class="tab-content">
                <div class="search-container">
                    <div class="search-box">
                        <i class="fa-solid fa-magnifying-glass"></i>
                        <input type="text" id="search-input" placeholder="Nh·∫≠p t·ª´ c·∫ßn t√¨m...">
                    </div>
                    <div class="search-results" id="search-results">
                        <!-- Results will be generated here -->
                    </div>
                </div>
            </section>
        </main>
        
    </div>

    <script src="list-manager.js"></script>
    <script src="script.js"></script>
    <script src="gamification.js"></script>
    <script src="games.js"></script>
    <script src="enhancements.js"></script>
</body>


</html>
